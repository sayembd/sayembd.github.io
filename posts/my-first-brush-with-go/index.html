<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>My First Brush With Go | Random Musings</title><meta name=keywords content><meta name=description content="I have decided to try out Golang. In this post I share my initial experience of setting up relevant tooling and writing my first ever Go script."><meta name=author content><link rel=canonical href=https://www.sayemahmed.com/posts/my-first-brush-with-go/><link crossorigin=anonymous href=/assets/css/stylesheet.min.05454d598f87e0c631d67ac68ed91c748c4f8cc32ce6b01b10afd02b558bc5ca.css integrity="sha256-BUVNWY+H4MYx1nrGjtkcdIxPjMMs5rAbEK/QK1WLxco=" rel="preload stylesheet" as=style><link rel=icon href=https://www.sayemahmed.com/favicon.ico><link rel=apple-touch-icon href=https://www.sayemahmed.com/apple-touch-icon.png><meta name=twitter:title content="My First Brush With Go | Random Musings"><meta name=twitter:description content="I have decided to try out Golang. In this post I share my initial experience of setting up relevant tooling and writing my first ever Go script."><meta property="og:title" content="My First Brush With Go | Random Musings"><meta property="og:description" content="I have decided to try out Golang. In this post I share my initial experience of setting up relevant tooling and writing my first ever Go script."><meta property="og:type" content="article"><meta property="og:url" content="https://www.sayemahmed.com/posts/my-first-brush-with-go/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-03-14T21:39:58+01:00"><meta property="article:modified_time" content="2023-03-14T21:39:58+01:00"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://www.sayemahmed.com/posts/"},{"@type":"ListItem","position":3,"name":"My First Brush With Go","item":"https://www.sayemahmed.com/posts/my-first-brush-with-go/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"My First Brush With Go | Random Musings","name":"My First Brush With Go","description":"I have decided to try out Golang. In this post I share my initial experience of setting up relevant tooling and writing my first ever Go script.","keywords":[],"wordCount":"1799","inLanguage":"en","datePublished":"2023-03-14T21:39:58+01:00","dateModified":"2023-03-14T21:39:58+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.sayemahmed.com/posts/my-first-brush-with-go/"},"publisher":{"@type":"Organization","name":"Random Musings","logo":{"@type":"ImageObject","url":"https://www.sayemahmed.com/favicon.ico"}}}</script><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript></head><body class="type-posts kind-page layout-" id=top><script data-no-instant>function switchTheme(e){switch(e){case"light":document.body.classList.remove("dark");break;case"dark":document.body.classList.add("dark");break;default:window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")}}function isDarkTheme(){return document.body.className.includes("dark")}function getPrefTheme(){return localStorage.getItem("pref-theme")}function setPrefTheme(e){switchTheme(e),localStorage.setItem("pref-theme",e)}const toggleThemeCallbacks={};toggleThemeCallbacks.main=e=>{setPrefTheme(e?"light":"dark")},window.addEventListener("toggle-theme",function(){const e=isDarkTheme();for(const t in toggleThemeCallbacks)toggleThemeCallbacks[t](e)});function toggleThemeListener(){window.dispatchEvent(new CustomEvent("toggle-theme"))}</script><script>(function(){const t="light",e=getPrefTheme(),n=e||t;switchTheme(n)})()</script><header class=header><nav class=nav><div class=logo><a href=https://www.sayemahmed.com accesskey=h title="Random Musings (Alt + H)">Random Musings</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://www.sayemahmed.com/about-me/ title="About Me">About Me</a></li><li><a href=https://www.sayemahmed.com/index.xml/ title=RSS>RSS</a></li></ul></nav></header><main class="main post"><article class=post-single><header class=post-header><h1 class=post-title>My First Brush With Go</h1><div class=post-description>I have decided to try out Golang. In this post I share my initial experience of setting up relevant tooling and writing my first ever Go script.</div><div class=post-meta><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg><span>March 14, 2023</span></span></div></header><div class=post-content><p>I have decided to have a go at Go (pun intended!).</p><p>The reasons are less important than the decision itself, so I will not discuss them in this blog. Instead, I will focus on the journey and will document the experience in a series of posts (hopefully, more to come!).</p><p>Anyone who has worked with a programming language professionally knows that learning a programming language involves more than learning syntax. Here is a list of things that I feel I need to learn if I want to be productive in Go (in no particular order) -</p><ol><li>Setting up relevant tools and being comfortable with them</li><li>The language syntax</li><li>Language APIs</li><li>Writing tests</li><li>3rd party libraries and frameworks</li><li>Debugging in Go</li><li>Compiling and packaging applications with Go</li><li>Set up CI/CD</li><li>Different failure modes and language quarks and learning how to watch out for them</li><li>Monitoring for failures, including learning how to collect metrics</li></ol><p>I am currently at stage 2, trying to learn the language syntax. I expect to jump back and forth between different stages as I continue learning Go.</p><h1 id=installing-go>Installing Go<a hidden class=anchor aria-hidden=true href=#installing-go>¶</a></h1><p>Installing Go on my machine was relatively easy as I am on a Mac. All I had to do was use <code>brew</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>brew install go
</span></span></code></pre></div><p>I verified my Go installation with:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>go version
</span></span></code></pre></div><p>which printed:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>go version go1.20.1 darwin/arm64
</span></span></code></pre></div><h1 id=writing-my-first-hello-world-script>Writing my first hello world script<a hidden class=anchor aria-hidden=true href=#writing-my-first-hello-world-script>¶</a></h1><p>Next, it was time to write my first ever hello world in Go. I used Visual Studio Code to create a file named <code>hello.go</code> with the following content -</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// Go organises code in packages! Similar to Java
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// I can import other packages and reuse their code
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// This is how I can define a function in Go
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Print</span><span class=p>(</span><span class=s>&#34;Hello World\n&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Now it is time to compile and run the code. I opened up the terminal, navigated to the directory containing the file, and executed:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>go run hello.go
</span></span></code></pre></div><p>The <code>go run</code> command compiled my script, built a native binary, and simultaneously executed it. Which then printed the expected output in the command line:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>Hello World
</span></span></code></pre></div><p>Success!</p><p>Like Java, Go also has the concept of packages. I am still not fully aware of all the rules and gotchas, but I assume their purpose is similar to Java - they have been designed to group relevant code under a common namespace.</p><p>I also learned that packages could decide to expose functions/variables to other packages. To do that, I have to define a function with a capital letter, and Go automatically assumes that it is intended to be used from other packages. This is why the <code>Print</code> function starts with a capital <code>P</code>.</p><p>Another observation is that if I change my package name to something else, like <code>hellopackage</code>, the code no longer compiles. Instead, I get the following error message:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>package command-line-arguments is not a main package
</span></span></code></pre></div><p>The package containing the <code>main</code> function must also be named <code>main</code>. This makes me wonder how people organise code in Go. Do they use reversed company domain name to name packages (i.e., <code>com.sayemahmed</code>) and then have only one package named <code>main</code> with only the <code>main</code> function to bootstrap the application? Or do they use something else?</p><h2 id=go-build><code>go build</code><a hidden class=anchor aria-hidden=true href=#go-build>¶</a></h2><p><code>go run</code> isn&rsquo;t the only way to build a Go script. We have another command at our disposal - <code>go build</code> - which compiles the script and generates a native executable binary:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>go build -o hello_world hello.go
</span></span></code></pre></div><p>I used the <code>-o</code> flag to specify a name for the binary file.</p><p>The compilation process reminded me of how I used to compile C/C++ files with <a href=https://gcc.gnu.org/>GCC</a> (<code>gcc hello.c -o hello</code> would be equivalent for a C file). With Java, however, I hardly needed to generate a native binary file (though I could, using GraalVM). Most of the times I have used Maven to build and deploy my web applications.</p><p>What are the differences between <code>go run</code> and <code>go build</code>? The <code>go run</code> command takes either a single file, a list of files, or the name of a package. It then compiles the code and creates a native binary file in a temporary directory, executes the binary, and then deletes it immediately.</p><p>The <code>go build</code> command also takes either a single file, a list of files, or the name of a package. However, it only compiles the code and creates a native binary. We can use the <code>-o</code> flag with this command to set the name of the compiled binary.</p><h1 id=built-in-tools>Built-in tools<a hidden class=anchor aria-hidden=true href=#built-in-tools>¶</a></h1><p>Besides the compiler, Go comes with many helpful tools with default installation. One such tool is <code>go fmt</code> which reformats code based on official standards. I was pleased to find out Go has an officially recommended formatting which is enforced during compile time! Ha! No more fighting over tabs vs spaces!!</p><p>The reason Go comes with standardised formatting seems to be easier tooling support. People claim that it makes it easy to write tools that manipulate Go source code, which makes it easy to write code generation tools. Nice.</p><p>Similar to a formatter, Go installation also includes a linter, a dependency manager, and a test runner. I have yet to try them out.</p><h1 id=my-first-real-script>My first real script<a hidden class=anchor aria-hidden=true href=#my-first-real-script>¶</a></h1><p>A few weeks ago, I needed to prepare a report. The report contained some information I collected over the last year. It was a ~500 lines file, and I wanted to check it had no duplicates before submitting it. I wrote a Go script to automate the process. The entire script is given below:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;bufio&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;os&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;strings&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=c1>// First argument is the full path to the binary when
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=c1>// executed with `go run`
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=nx>os</span><span class=p>.</span><span class=nx>Args</span><span class=p>)</span> <span class=o>!=</span> <span class=mi>2</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Usage: &lt;exeutable&gt; &lt;full-path&gt;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=nx>fileName</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nx>Args</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>	<span class=nx>readFile</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>Open</span><span class=p>(</span><span class=nx>fileName</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Error while trying to open file&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=nx>fileScanner</span> <span class=o>:=</span> <span class=nx>bufio</span><span class=p>.</span><span class=nf>NewScanner</span><span class=p>(</span><span class=nx>readFile</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=nx>fileScanner</span><span class=p>.</span><span class=nf>Split</span><span class=p>(</span><span class=nx>bufio</span><span class=p>.</span><span class=nx>ScanLines</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>// https://stackoverflow.com/a/34020023
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nx>set</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>(</span><span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=kd>struct</span><span class=p>{})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>// https://dave.cheney.net/2014/03/25/the-empty-struct
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=kd>var</span> <span class=nx>empty</span> <span class=kd>struct</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=k>for</span> <span class=nx>fileScanner</span><span class=p>.</span><span class=nf>Scan</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nx>line</span> <span class=o>:=</span> <span class=nx>strings</span><span class=p>.</span><span class=nf>TrimSpace</span><span class=p>(</span><span class=nx>fileScanner</span><span class=p>.</span><span class=nf>Text</span><span class=p>())</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=nx>line</span> <span class=o>==</span> <span class=s>&#34;&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=k>continue</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=nx>_</span><span class=p>,</span> <span class=nx>found</span> <span class=o>:=</span> <span class=nx>set</span><span class=p>[</span><span class=nx>line</span><span class=p>]</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=nx>found</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Duplicate exists: &#34;</span><span class=p>,</span> <span class=nx>line</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=nx>set</span><span class=p>[</span><span class=nx>line</span><span class=p>]</span> <span class=p>=</span> <span class=nx>empty</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=nx>readFile</span><span class=p>.</span><span class=nf>Close</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>I invoked the script as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>go run my-script.go ~/Documents/my-report.md
</span></span></code></pre></div><p>Which then displayed all the duplicate lines in <code>my-report.md</code> file.</p><p>I first learned how to pass command line arguments to a Go script. To do that, I needed to import the built-in <code>os</code> package and use it&rsquo;s <code>Args</code> array. It looks like arrays in Go work similarly to Java and C - zero-based and indexed using <code>[]</code>. The first element contains the executable&rsquo;s name (in my case, it was something like <code>/var/folders/mr/k_b0wtwd11q66p3z3787w9082200gq/T/go-build907299260/b001/exe/my-script</code>). Starting from the second element, we can access any passed-in arguments. The script expects the file name, which should be checked for duplicates, so we access the file name at index 1.</p><p>Next, I learned that to find the length of an array, I need to use the built-in <code>len</code> function. This is similar to how the <a href=https://www.programiz.com/python-programming/methods/built-in/len>len function in Python works</a>.</p><p>The line:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>fileName</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nx>Args</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>
</span></span></code></pre></div><p>declares and simultaneously initialises a variable named <code>fileName</code> with the name of our file. Go seems to allow a couple of ways to declare variables - one using <code>var</code> and the other without it. The above line for example could have also been written as:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// Declare the variable first, with explicit type
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=nx>fileScanner</span> <span class=o>*</span><span class=nx>bufio</span><span class=p>.</span><span class=nx>Scanner</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Initialise the variable
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>fileScanner</span> <span class=p>=</span> <span class=nx>bufio</span><span class=p>.</span><span class=nf>NewScanner</span><span class=p>(</span><span class=nx>readFile</span><span class=p>)</span>
</span></span></code></pre></div><p>There are some differences between the two approaches. For example, we can only use <code>:=</code> within a function. It can also infer the variable type automatically as we are required to specify a value immediately.</p><p>On the other hand, we can use <code>=</code> outside a function as well. It also cannot infer the type of a variable automatically.</p><p>When I saw the <code>*</code> in the type, I started thinking - <code>does Go have explicit pointers like C</code>? <a href="https://go.dev/tour/moretypes/1#:~:text=Go%20has%20pointers.,Its%20zero%20value%20is%20nil%20.">And it seems it does</a>! That means caring about <a href=https://en.wikipedia.org/wiki/Dangling_pointer>Dangling Pointers</a> and SegFaults and memory safety and all that!</p><p>The following line opens the file for reading:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>readFile</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>Open</span><span class=p>(</span><span class=nx>fileName</span><span class=p>)</span>
</span></span></code></pre></div><p>I didn&rsquo;t specify file open (i.e., read-write/append only/read-only) mode when calling <code>Open</code>, but I assume there must be a way to do it.</p><p>One interesting thing to note is how I used two variables to store the return values from <code>Open</code>. It looks similar to how Python can return multiple values from a method (which it converts into a Tuple). I am not 100% sure whether something similar is happening here. <a href=https://gobyexample.com/multiple-return-values>The Go by Example site mentions multiple return values</a>, but it doesn&rsquo;t explain how it actually works under the hood.</p><p>Also, after looking at some examples, it seems many functions in Go often return a couple of return values, especially the ones that do some I/O or have a chance of running into errors/issues. In Java, we used to throw exceptions when an I/O failed, but in Go, the convention is to return a second value describing the error.</p><p>The following two lines:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>fileScanner</span> <span class=o>:=</span> <span class=nx>bufio</span><span class=p>.</span><span class=nf>NewScanner</span><span class=p>(</span><span class=nx>readFile</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>fileScanner</span><span class=p>.</span><span class=nf>Split</span><span class=p>(</span><span class=nx>bufio</span><span class=p>.</span><span class=nx>ScanLines</span><span class=p>)</span>
</span></span></code></pre></div><p>instantiates and configures something like a <a href=https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/Scanner.html>Scanner</a> to read the file line by line.</p><p>My initial idea was to create a <a href=https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/Set.html>Set</a> where I store the lines after reading from the file. Then, if I ever find another matching line by doing a simple <a href=https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/Set.html#contains(java.lang.Object)>contains</a> check, I have found a duplicate. While trying to translate this idea into Go code, I discovered that it does not have any built-in Set type. It does have a <a href=https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/Map.html>Map</a>, and the recommendation was to use it to simulate a Set, which I did:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>set</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>(</span><span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=kd>struct</span><span class=p>{})</span>
</span></span></code></pre></div><p>I also came across <code>empty</code> struct. It seems Go does not have anything that looks like a Java class, but it does have <a href=https://en.wikipedia.org/wiki/Struct_(C_programming_language)>Structures like in C</a>. An empty <code>struct</code> is a special kind of structure in that it does not occupy any memory. And so, simulating a Set of strings with a Map of String to empty struct was the most space-efficient way.</p><p>The next few lines are relatively easy to understand - we stream through the lines in the files and check for duplicates. The interesting bit here is the line:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>_</span><span class=p>,</span> <span class=nx>found</span> <span class=o>:=</span> <span class=nx>set</span><span class=p>[</span><span class=nx>line</span><span class=p>]</span>
</span></span></code></pre></div><p>which shows that, like some programming languages <a href=https://www.baeldung.com/scala/underscore#ignoring-things>i.e., Scala</a> Go also supports <code>_</code> as a way to ignore values when we don&rsquo;t care about them.</p><h1 id=final-thoughts>Final thoughts<a hidden class=anchor aria-hidden=true href=#final-thoughts>¶</a></h1><p>After writing my first script, my first impression was that Go is between C and Java. It has pointers like in C, and it has packages like Java. Its similarity to C might be why people often say that Go applications have less resource footprint. On the other hand, I wonder if Go has something like a <a href=https://spring.io/>Spring-framework</a>, which removes a lot of boilerplate for anyone developing applications in Java.</p><p>But all in all, I like my initial brush with Go.</p></div><footer class=post-footer><nav class=paginav><a class=next href=https://www.sayemahmed.com/posts/unwinding-the-abstraction-how-does-arraylist-in-java-work/><span class=title>Next Page&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right" style="user-select:text"><line x1="5" y1="12" x2="19" y2="12" style="user-select:text"/><polyline points="12 5 19 12 12 19" style="user-select:text"/></svg></span><br><span>Unwinding the Abstraction - How does ArrayList in Java Work?</span></a></nav></footer><div class=comments-separator></div></article></main><footer class=footer><span>&copy; 2024 <a href=https://www.sayemahmed.com>Random Musings</a></span><span style=display:inline-block;margin-left:1em>
<a href=https://creativecommons.org/licenses/by-sa/4.0/>CC BY-SA</a></span>
<span style=display:inline-block;margin-left:1em>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
    <a href=https://github.com/reorx/hugo-PaperModX/ rel=noopener target=_blank>PaperModX</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>(function(){const t=""=="1";if(t)return;let e=document.getElementById("theme-toggle");e.removeEventListener("click",toggleThemeListener),e.addEventListener("click",toggleThemeListener)})()</script><script>(function(){let e=document.getElementById("menu");e&&(e.scrollLeft=localStorage.getItem("menu-scroll-position"),e.onscroll=function(){localStorage.setItem("menu-scroll-position",e.scrollLeft)});const t=""=="1",n=""=="1";if(window.matchMedia("(prefers-reduced-motion: reduce)").matches||t||n)return;document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})})()</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>if(window.scrollListeners)for(const e of scrollListeners)window.removeEventListener("scroll",e);window.scrollListeners=[]</script><script src=/js/medium-zoom.min.js data-no-instant></script>
<script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script><script>(function(){const a=""=="1";if(!a)return;if(!document.querySelector(".toc")){console.log("no toc found, ignore toc scroll");return}const r=window.scrollListeners,t=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id]"),n="active";let e=t[0];o(e).classList.add(n);const c=()=>{const s=[];for(const e of t)if(l(e)<5)s.push(e);else break;s.length>0?newActiveHeading=s[s.length-1]:newActiveHeading=t[0],e!=newActiveHeading&&(o(e).classList.remove(n),e=newActiveHeading,o(e).classList.add(n))};let s=null;const i=()=>{s!==null&&clearTimeout(s),s=setTimeout(c,50)};window.addEventListener("scroll",i,!1),r.push(i);function o(e){const t=encodeURI(e.getAttribute("id")).toLowerCase();return document.querySelector(`.toc ul li a[href="#${t}"]`)}function l(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect();return t.top}})()</script></body></html>