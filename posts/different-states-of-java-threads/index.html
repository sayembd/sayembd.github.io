<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Different States of Java Threads | Random Musings</title><meta name=keywords content><meta name=description content="This article explains the different states a Java Thread can have, and all possible transitions between them."><meta name=author content><link rel=canonical href=https://www.sayemahmed.com/posts/different-states-of-java-threads/><link crossorigin=anonymous href=/assets/css/stylesheet.min.5fc7093e58e5038c03e70b417ab8f50482ebc513e1b1e74b0e42a004bc7ce7ed.css integrity="sha256-X8cJPljlA4wD5wtBerj1BILrxRPhsedLDkKgBLx85+0=" rel="preload stylesheet" as=style><link rel=icon href=https://www.sayemahmed.com/favicon.ico><link rel=apple-touch-icon href=https://www.sayemahmed.com/apple-touch-icon.png><meta name=twitter:title content="Different States of Java Threads | Random Musings"><meta name=twitter:description content="This article explains the different states a Java Thread can have, and all possible transitions between them."><meta name=twitter:site content="@novoreorx"><meta name=twitter:creator content="@novoreorx"><meta property="og:title" content="Different States of Java Threads | Random Musings"><meta property="og:description" content="This article explains the different states a Java Thread can have, and all possible transitions between them."><meta property="og:type" content="article"><meta property="og:url" content="https://www.sayemahmed.com/posts/different-states-of-java-threads/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-01-14T02:38:52+02:00"><meta property="article:modified_time" content="2019-01-14T02:38:52+02:00"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://www.sayemahmed.com/posts/"},{"@type":"ListItem","position":3,"name":"Different States of Java Threads","item":"https://www.sayemahmed.com/posts/different-states-of-java-threads/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Different States of Java Threads | Random Musings","name":"Different States of Java Threads","description":"This article explains the different states a Java Thread can have, and all possible transitions between them.","keywords":[],"wordCount":"801","inLanguage":"en","datePublished":"2019-01-14T02:38:52+02:00","dateModified":"2019-01-14T02:38:52+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.sayemahmed.com/posts/different-states-of-java-threads/"},"publisher":{"@type":"Organization","name":"Random Musings","logo":{"@type":"ImageObject","url":"https://www.sayemahmed.com/favicon.ico"}}}</script><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript></head><body id=top><script data-no-instant>function switchTheme(e){switch(e){case"light":document.body.classList.remove("dark");break;case"dark":document.body.classList.add("dark");break;default:window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")}}function isDarkTheme(){return document.body.className.includes("dark")}function getPrefTheme(){return localStorage.getItem("pref-theme")}function setPrefTheme(e){switchTheme(e),localStorage.setItem("pref-theme",e)}const toggleThemeCallbacks={};toggleThemeCallbacks.main=e=>{setPrefTheme(e?"light":"dark")},window.addEventListener("toggle-theme",function(){const e=isDarkTheme();for(const t in toggleThemeCallbacks)toggleThemeCallbacks[t](e)});function toggleThemeListener(){window.dispatchEvent(new CustomEvent("toggle-theme"))}</script><script>(function(){const t="light",e=getPrefTheme(),n=e||t;switchTheme(n)})()</script><header class=header><nav class=nav><div class=logo><a href=https://www.sayemahmed.com accesskey=h title="Random Musings (Alt + H)">Random Musings</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://www.sayemahmed.com/about-me/ title="About Me">About Me</a></li><li><a href=https://www.sayemahmed.com/index.xml/ title=RSS>RSS</a></li></ul></nav></header><main class="main post"><article class=post-single><header class=post-header><h1 class=post-title>Different States of Java Threads</h1><div class=post-description>This article explains the different states a Java Thread can have, and all possible transitions between them.</div><div class=post-meta><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg><span>January 14, 2019</span></span></div></header><div class=post-content><h2 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>¶</a></h2><p>In Java, threads can have States. The <a href=https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.State.html>Thread.State</a> enum defines the different states that a Java thread can have. This enum defines the following values -</p><ol><li>NEW</li><li>RUNNABLE</li><li>BLOCKED</li><li>WAITING</li><li>TIMED_WAITING</li><li>TERMINATED</li></ol><p>In the subsequent sections I will provide a brief overview of these states along with possible transitions between them.</p><h2 id=states-of-a-java-thread>States of a Java Thread<a hidden class=anchor aria-hidden=true href=#states-of-a-java-thread>¶</a></h2><h3 id=new>NEW<a hidden class=anchor aria-hidden=true href=#new>¶</a></h3><p>This is the default state a thread gets when it is first created.</p><h3 id=runnable>RUNNABLE<a hidden class=anchor aria-hidden=true href=#runnable>¶</a></h3><p>As soon as a thread starts executing, it moves to the RUNNABLE state.</p><p>Note that a thread that is waiting to acquire a CPU for execution is still considered to be in this state.</p><h3 id=blocked>BLOCKED<a hidden class=anchor aria-hidden=true href=#blocked>¶</a></h3><p>A thread moves to the BLOCKED state as soon as it gets blocked waiting for a monitor lock. This can happen in one of the following two ways -</p><ol><li>It&rsquo;s waiting to acquire a lock to enter a synchronised block/method.</li><li>It&rsquo;s waiting to reacquire the monitor lock of an object on which it invoked the <a href=https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#wait()>Object.wait</a> method.</li></ol><h3 id=waiting>WAITING<a hidden class=anchor aria-hidden=true href=#waiting>¶</a></h3><p>A thread moves to this state as a result of invoking one of the following methods -</p><ol><li><a href=https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#wait()>Object.wait</a> without a timeout</li><li><a href=https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html#join()>Thread.join</a> without a timeout</li><li><a href=https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/locks/LockSupport.html#park()>LockSupport.park</a></li></ol><h3 id=timed_waiting>TIMED_WAITING<a hidden class=anchor aria-hidden=true href=#timed_waiting>¶</a></h3><p>A thread moves to this state as a result of invoking one of the following methods -</p><ol><li><a href=https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html#sleep(long)>Thread.sleep</a></li><li><a href=https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#wait(long)>Object.wait</a> with a timeout</li><li><a href=https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html#join(long)>Thread.join</a> with a timeout</li><li><a href=https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/locks/LockSupport.html#parkNanos(long)>LockSupport.parkNanos</a></li><li><a href=https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/locks/LockSupport.html#parkUntil(long)>LockSupport.parkUntil</a></li></ol><h3 id=terminated>TERMINATED<a hidden class=anchor aria-hidden=true href=#terminated>¶</a></h3><p>As soon as a thread terminates, it moves to this state.</p><h2 id=possible-state-transitions>Possible state transitions<a hidden class=anchor aria-hidden=true href=#possible-state-transitions>¶</a></h2><p>The following diagram shows the possible transitions between different states -</p><p><img loading=lazy src=/posts/different-states-of-java-threads/thread-state-transitions.png type alt="Thread State Transitions"></p><p>As soon as a thread gets scheduled for execution, it moves to the RUNNABLE state. This transition has been shown with the first arrow (marked as 1).</p><p>From the RUNNABLE state, a thread can move to any of the BLOCKED, WAITING, TIMED_WAITING, or TERMINATED state. Theoretically speaking, if a thread does not wait to acquire any lock, or does not sleep, or does not invoke any of the methods which makes it wait, it just finishes its execution and directly goes to the TERMINATED state (marked as 2d).</p><p>Of course in a practical application, the above scenario is highly unlikely. Often a thread tries to acquire a lock, in which case it moves to the BLOCKED (marked as 2a) state if it has to wait for the lock. Threads also explicitly wait for some preconditions to be true/actions from other threads, in which case they move to the WAITING (marked as 2b) or the TIMED_WAITING (marked as 2c) state, depending on whether the waits were timed or not.</p><p>Once a thread moves to the BLOCKED state, the only possible transition that is allowed next is to move to the RUNNABLE state (marked as 3d).</p><p>Similarly, the only possible transition from the WAITING state is to move to the BLOCKED state (marked as 3c).</p><p>Please note that some of the articles on the internet incorrectly adds a transition from the WAITING to the RUNNABLE state. This is just not correct. A thread can never move to the RUNNABLE state from the WAITING state directly. We can understand the reason for this with an example.</p><p>Suppose that we have a thread T which is currently in the RUNNABLE state and holds the monitor lock of three objects a, b, and c, as shown in the diagram below -</p><p><img loading=lazy src=/posts/different-states-of-java-threads/before-invoking-wait.png type alt="Before invoking wait"></p><p>At this point, T invokes c.wait(), after which it no longer holds the monitor lock of object c -</p><p><img loading=lazy src=/posts/different-states-of-java-threads/after-invoking-wait.png type alt="After invoking wait"></p><p>As soon as T is notified using an invocation of notify/notifyAll, it stops waiting and competes with other threads (let&rsquo;s say, X and Y) to acquire the monitor lock of c -</p><p><img loading=lazy src=/posts/different-states-of-java-threads/after-invoking-wait-compete.png type alt="After invoking wait compete"></p><p>which, according to the definitions above, is the BLOCKED state. Only after acquiring the monitor lock of c, T moves to the RUNNABLE state. Similar reasoning can be applied for the Thread.join() (which internally uses Object.wait()) and LockSupport.park().</p><p>Let&rsquo;s get back to our original state transition diagram. As we can see, a thread can move to either the RUNNABLE (marked as 3b) or the BLOCKED (marked as 3a) state from the TIMED_WAITING state. The transition to RUNNABLE is possible in this case because a thread can enter the TIMED_WAITING state after invoking the Thread.sleep method, in which case it retains all the monitor locks it currently holds.</p><p>As a thread finishes execution after moving back and forth between the RUNNABLE, BLOCKED, WAITING or TIMED_WAITING state, it moves to the TERMINATED state once and for all.</p><h2 id=how-do-we-get-the-current-state-of-a-thread>How do we get the current state of a Thread?<a hidden class=anchor aria-hidden=true href=#how-do-we-get-the-current-state-of-a-thread>¶</a></h2><p>We can use the <a href=https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html#getState()>Thread.getState()</a> method to retrieve the current state of a thread. We can use this value to monitor or debug any concurrency issues that our application might face in production.</p><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>¶</a></h2><p>In this article we briefly reviewed different states a Java thread can have, and how a thread moves between these states. As always, any feedback/improvement suggestions/comments is highly appreciated!</p></div><footer class=post-footer><nav class=paginav><a class=prev href=https://www.sayemahmed.com/posts/writing-executable-specifications-with-junit5-mockito-and-assertj/><span class=title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left" style="user-select:text"><line x1="19" y1="12" x2="5" y2="12" style="user-select:text"/><polyline points="12 19 5 12 12 5" style="user-select:text"/></svg>&nbsp;Prev Page</span><br><span>Writing Executable Specifications With Junit5 Mockito and AssertJ</span></a>
<a class=next href=https://www.sayemahmed.com/posts/a-brief-overview-of-the-fork-join-framework-in-java/><span class=title>Next Page&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right" style="user-select:text"><line x1="5" y1="12" x2="19" y2="12" style="user-select:text"/><polyline points="12 5 19 12 12 19" style="user-select:text"/></svg></span><br><span>A Brief Overview of the Fork Join Framework in Java</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://www.sayemahmed.com>Random Musings</a></span><span style=display:inline-block;margin-left:1em>
<a href=https://creativecommons.org/licenses/by-sa/4.0/>CC BY-SA</a></span>
<span style=display:inline-block;margin-left:1em>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
    <a href=https://github.com/reorx/hugo-PaperModX/ rel=noopener target=_blank>PaperModX</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>(function(){const t=""=="1";if(t)return;let e=document.getElementById("theme-toggle");e.removeEventListener("click",toggleThemeListener),e.addEventListener("click",toggleThemeListener)})()</script><script>(function(){let e=document.getElementById("menu");e&&(e.scrollLeft=localStorage.getItem("menu-scroll-position"),e.onscroll=function(){localStorage.setItem("menu-scroll-position",e.scrollLeft)});const t=""=="1",n=""=="1";if(window.matchMedia("(prefers-reduced-motion: reduce)").matches||t||n)return;document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})})()</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>if(window.scrollListeners)for(const e of scrollListeners)window.removeEventListener("scroll",e);window.scrollListeners=[]</script><script src=/js/medium-zoom.min.js data-no-instant></script>
<script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script><script>(function(){const r=""=="1";if(!r)return;if(!document.querySelector(".toc")){console.log("no toc found, ignore toc scroll");return}const c=window.scrollListeners,n=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id]"),s="active";let e=n[0];o(e).classList.add(s);const a=()=>{const t=[];for(const e of n)if(l(e)<5)t.push(e);else break;t.length>0?newActiveHeading=t[t.length-1]:newActiveHeading=n[0],e!=newActiveHeading&&(o(e).classList.remove(s),e=newActiveHeading,o(e).classList.add(s))};let t=null;const i=()=>{t!==null&&clearTimeout(t),t=setTimeout(a,50)};window.addEventListener("scroll",i,!1),c.push(i);function o(e){const t=encodeURI(e.getAttribute("id")).toLowerCase();return document.querySelector(`.toc ul li a[href="#${t}"]`)}function l(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect();return t.top}})()</script></body></html>